awk -F, 'NR > 1 && $3 == 2 && $NF ~ /S/ {print $0}' titanic.csv | sed -e 's/,male,/,M,/' -e 's/,female,/,F,/'| awk -F, 'BEGIN {total_people = 0; total_age_sum = 0} {if ($7 != "") {total_people+=1; total_age_sum+=$7; print $0}} END {print "Avg age of the filtered list: " total_age_sum/total_people}'
